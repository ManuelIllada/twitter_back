<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("../partials/meta.ejs")%>
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"
    />
    <title>Document</title>
  </head>
  <body>
    <div class="container">
      <div class="row ms-5">
        <%- include("../partials/navbar.ejs")%> <%- include("../partials/log-out-modal.ejs")%>
        <div class="col-11 col-lg-7">
          <div
            id="profile-banner"
            class="p-2 border-start border-end border-bottom"
            style="border-color: rgba(128, 128, 128, 0.475)"
          >
            <div>
              <div class="mt-4" style="height: 75px; width: 75px; display: flex; align-items: stretch; border-radius: 100%; border: solid 3px white; overflow: hidden; "><img style=" image-rendering: optimizeQuality; object-fit: scale-down;" src="/img/<%= user.image %>" alt="" /></div>
              
              <div class="follow">
                <button
                class="btn rounded-pill"
                style="color: white; background-color: #1da1f2"
              >
                Follow
              </button>
            </div>
              <div class="userName">
                <h3><%= user.firstname %> <%= user.lastname %></h3>
              </div>
              
              <small class="text-start opacity-75" style="color: #000000;
                font-family: Arial, Helvetica, sans-serif; ">
                  <%= "@" + user.username %>
              </small>
              
      
              <span style="float:right;"
                ><a class="me-3" style="text-decoration: none; color: black" href="/usuarios/following"
                  ><strong> <%=(user.following).length%></strong> <span class="opacity-75"> Following</span> </a
                >
                <a style="text-decoration: none; color: black" href="/usuarios/follower"
                  ><strong> <%= (user.follower).length %></strong> <span class="opacity-75"> Followers </span></a
                ></span
              >
            </div>
            <div id="tweet-blue-border" class="ms-3">Tweets </div>
          </div>

          <% for(tweet of tweets){ %>

            <div
              class="d-flex flex-start p-2 border-bottom border-start border-end tweet"
              style="border-color: rgba(128, 128, 128, 0.475)"
            >
              <div class="p-1">
                <img
                  style="width: 50px; height: 50px; border-radius: 100%"
                  src="/img/<%= user.image %>"
                  alt=""
                />
              </div>
              <div>
                <span class="text-start fw-bold"
                  ><%= user.firstname + " " + user.lastname %></span
                >
  
                <small class="text-start opacity-75" style="color: #000000;
                font-family: Arial, Helvetica, sans-serif; ">
                  <%= "@" + user.username + "â€¢" %>
              </small>
                <%const result  = formatDistance(today,tweet.createdAt) %>
                
                <small class="text-start opacity-75" style="color: #000000;
                font-family: Arial, Helvetica, sans-serif; "><%= result %></small>
                <p class="d-block text-start opacity-75"><%= tweet.content%></p>
                <%const userLike = tweet.like.some((u) => u.id === user.id);%>
                <% if (!userLike) {%>
                <a
                          href="/usuarios/like/<%=tweet._id%>"
                          type="submit"
                          class="svglike"
                          ><img src="/img/corazon.svg" alt="like" /></a
                        >
                <%}else{%>
                  <a
                  href="/usuarios/dislike/<%=tweet._id%>"
                  type="submit"
                  class="svgdislike"
                  ><img src="/img/corazoncolor.svg" alt="like" /></a
                >
                <%}%>
                <span><%= tweet.like.length %></span>
                
              </div>
              <div class="trash d-flex ms-auto mt-auto justify-content-end">
                  <a href="/usuarios/deletetweet/<%=tweet._id%>"
                    ><img  class="me-2" src="/img/trash.svg" alt="trash img"
                  /></a>
              </div>
            </div>
          <% } %>
            
          
      </div>
      <%- include("../partials/cards") %>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
